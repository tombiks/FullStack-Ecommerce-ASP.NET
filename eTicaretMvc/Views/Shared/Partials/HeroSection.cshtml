@{
    bool isHomeIndex = ViewContext.RouteData.Values["controller"]?.ToString() is "Home" && ViewContext.RouteData.Values["action"]?.ToString() is "Index";
}

<style>
    /* Override overflow for dropdown to work */
    .hero__search {
        overflow: visible !important;
        margin-bottom: 30px;
        min-height: 50px;
    }

    .hero__search::after {
        content: "";
        display: table;
        clear: both;
    }

    .hero__search__form {
        overflow: visible !important;
        position: relative;
    }

    /* Fix banner positioning */
    .hero__item {
        overflow: hidden;
        clear: both;
        margin-top: 0;
    }

    .hero__search__categories {
        position: relative;
        cursor: pointer;
    }

        .hero__search__categories ul {
            display: none;
            position: absolute;
            left: 0;
            top: 50px;
            width: 250px;
            background: #ffffff;
            border: 1px solid #ebebeb;
            padding-left: 0;
            padding-top: 5px;
            padding-bottom: 5px;
            z-index: 9999;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

            .hero__search__categories ul li {
                list-style: none;
            }

                .hero__search__categories ul li a {
                    font-size: 14px;
                    color: #1c1c1c;
                    line-height: 45px;
                    display: block;
                    padding-left: 20px;
                }

                    .hero__search__categories ul li a:hover {
                        color: #7fad39;
                        background: #f5f5f5;
                    }
</style>

<!-- Hero Section Begin -->
<section class="hero @(isHomeIndex ? "" : "hero-normal")">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="hero__categories">
                    <div class="hero__categories__all">
                        <i class="fa fa-bars"></i>
                        <span>All Categories</span>
                    </div>
                    <ul>
                        @await Component.InvokeAsync("CategoryList", new { viewname = "Listing" })
                    </ul>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="hero__search">
                    <div class="hero__search__form">
                        <form action="#">
                            <div class="hero__search__categories">
                                <div>All Categories</div>
                                <span class="arrow_carrot-down"></span>
                                <ul>
                                    @await Component.InvokeAsync("CategoryList", new { viewname = "Search" })
                                </ul>
                            </div>
                            <input type="text" placeholder="What do you need?">
                            <button type="submit" class="site-btn">SEARCH</button>
                        </form>
                    </div>
                    <div class="hero__search__phone">
                        <div class="hero__search__phone__icon">
                            <i class="fa fa-phone"></i>
                        </div>
                        <div class="hero__search__phone__text">
                            <h5>+40 40-4040-40</h5>
                            <span>support 24/7 time</span>
                        </div>
                    </div>
                </div>
                @if (isHomeIndex)
                {
                    <div class="hero__item set-bg" data-setbg="/theme/img/hero/banner.jpg">
                        <div class="hero__text">
                            <span>FRUIT FRESH</span>
                            <h2>Vegetable <br />100% Organic</h2>
                            <p>Free Pickup and Delivery Available</p>
                            <a href="#" class="primary-btn">SHOP NOW</a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>
<!-- Hero Section End -->

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var searchCategories = document.querySelector('.hero__search__categories');
        if (searchCategories) {
            // Toggle dropdown on click
            searchCategories.addEventListener('click', function(e) {
                // Don't close if clicking on a link
                if (e.target.tagName !== 'A') {
                    e.stopPropagation();
                    var ul = this.querySelector('ul');
                    if (ul) {
                        ul.style.display = ul.style.display === 'block' ? 'none' : 'block';
                    }
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                var ul = searchCategories.querySelector('ul');
                if (ul && !searchCategories.contains(e.target)) {
                    ul.style.display = 'none';
                }
            });
        }
    });
</script>